<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Administração - PASSENGER PRODUCTS</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f4f4f4;
    }
    .login, .admin-panel {
      max-width: 500px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    input, button, select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
    }
    .produto {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
      border-bottom: 1px solid #ccc;
      padding-bottom: 10px;
    }
    .produto img {
      height: 50px;
      border-radius: 5px;
    }
    .opcoes-imagem {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<div class="login" id="loginBox">
  <h2>Login de Administrador</h2>
  <input type="text" id="user" placeholder="Nome de utilizador" />
  <input type="password" id="pass" placeholder="Senha" />
  <button onclick="login()">Entrar</button>
  <p id="loginErro" style="color:red;"></p>
</div>

<div class="admin-panel" id="adminPanel" style="display:none;">
  <h2>Painel de Administração</h2>
  <input type="text" id="nome" placeholder="Nome do Produto">
  <input type="text" id="preco" placeholder="Preço">
  <select id="categoria">
    <option value="acessorios">Acessórios</option>
    <option value="waves">Waves</option>
    <option value="relógios">Relógios</option>
    <option value="cuidados">Cuidados</option>
  </select>

  <div class="opcoes-imagem">
    <input type="file" id="imagemFile" accept="image/*">
    <input type="text" id="imagemURL" placeholder="Ou URL da imagem">
  </div>

  <button onclick="adicionarProduto()">Adicionar Produto</button>
  <hr>
  <h3>Produtos Existentes</h3>
  <div id="produtosLista"></div>
</div>

<script>
  const usuarios = {
    'Otniel5940': '5940',
    'DavidSebastiao': 'passenger.products.2025'
  };

  function login() {
    const user = document.getElementById('user').value.trim();
    const pass = document.getElementById('pass').value.trim();
    const erro = document.getElementById('loginErro');

    if (usuarios[user] && usuarios[user] === pass) {
      document.getElementById('loginBox').style.display = 'none';
      document.getElementById('adminPanel').style.display = 'block';
      carregarProdutos();
    } else {
      erro.textContent = "Credenciais inválidas.";
    }
  }

  function adicionarProduto() {
    const nome = document.getElementById('nome').value;
    const preco = document.getElementById('preco').value;
    const categoria = document.getElementById('categoria').value;
    const file = document.getElementById('imagemFile').files[0];
    const imagemURL = document.getElementById('imagemURL').value;

    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        salvarProduto(nome, preco, categoria, e.target.result);
      };
      reader.readAsDataURL(file);
    } else if (imagemURL.trim() !== '') {
      salvarProduto(nome, preco, categoria, imagemURL);
    } else {
      alert("Por favor selecione uma imagem ou insira a URL.");
    }
  }

  function salvarProduto(nome, preco, categoria, imagem) {
    const produtos = JSON.parse(localStorage.getItem('produtosPP')) || [];
    const id = Date.now();
    produtos.push({ id, nome, preco, categoria, imagem });
    localStorage.setItem('produtosPP', JSON.stringify(produtos));
    carregarProdutos();
    limparCampos();
  }

  function limparCampos() {
    document.getElementById('nome').value = '';
    document.getElementById('preco').value = '';
    document.getElementById('imagemFile').value = '';
    document.getElementById('imagemURL').value = '';
  }

  function carregarProdutos() {
    const produtos = JSON.parse(localStorage.getItem('produtosPP')) || [];
    const lista = document.getElementById('produtosLista');
    lista.innerHTML = '';
    produtos.forEach(prod => {
      const div = document.createElement('div');
      div.className = 'produto';
      div.innerHTML = `
        <div>
          <img src="${prod.imagem}" alt="imagem">
          <strong>${prod.nome}</strong><br>
          ${prod.preco} - ${prod.categoria}
        </div>
        <button onclick="removerProduto(${prod.id})">Remover</button>
      `;
      lista.appendChild(div);
    });
  }

  function removerProduto(id) {
    let produtos = JSON.parse(localStorage.getItem('produtosPP')) || [];
    produtos = produtos.filter(p => p.id !== id);
    localStorage.setItem('produtosPP', JSON.stringify(produtos));
    carregarProdutos();
  }
</script>

</body>
</html>

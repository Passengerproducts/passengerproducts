<!DOCTYPE html><html lang="pt"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagamento por Referência</title>
  <link rel="stylesheet" href="css/estilo.css">
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    (function () {
      emailjs.init("onayxrP4KwhBEOKEr");
    })();function enviarPedidoPorEmail(dadosCliente, produtos, total) {
  const produtosTexto = produtos.map(p => `• ${p.nome} - ${p.quantidade || 1} x ${p.preco}`).join('\n');

  const templateParams = {
    nome: dadosCliente.nome,
    telefone: dadosCliente.telefone,
    email: dadosCliente.email,
    produtos: produtosTexto,
    total: total
  };

  emailjs.send("service_ws8wnkp", "template_ms0s3cm", templateParams)
    .then(function (response) {
      alert("Pedido enviado com sucesso! Entraremos em contacto em breve.");
    }, function (error) {
      console.error("Erro ao enviar o e-mail:", error);
      alert("Erro ao enviar pedido. Tente novamente.");
    });
}

window.onload = function () {
  const cliente = {
    nome: localStorage.getItem('cliente_nome') || "(sem nome)",
    telefone: localStorage.getItem('cliente_telefone') || "(sem telefone)",
    email: localStorage.getItem('cliente_email') || "(sem email)"
  };

  const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
  const total = carrinho.reduce((acc, item) => acc + (parseFloat(item.preco.replace(/\./g, '').replace(',', '.')) * (item.quantidade || 1)), 0);

  enviarPedidoPorEmail(cliente, carrinho, total.toLocaleString('pt-AO', { style: 'currency', currency: 'AOA' }));
}

  </script>
</head><body>
  <header>
    <h1>Pagamento por Referência</h1>
  </header>
  <main style="text-align:center; padding: 40px;">
    <h2>Use a referência abaixo para realizar o pagamento:</h2>
<p><strong>Entidade:</strong> 00445</p>
<p><strong>Referência:</strong> 954 546 731</p>
    <p>Assim que recebermos o pagamento, entraremos em contacto pelo seu WhatsApp ou email para confirmação.</p>
  </main>
  <footer style="text-align: center; padding: 20px; background: #eee;">
    <p>&copy; 2025 PASSENGER PRODUCTS - PP | Todos os direitos reservados</p>
    <p>Contato: 954 546 731 | Email: passenger.products.apoio@gmail.com</p>
  </footer>
</body></html>